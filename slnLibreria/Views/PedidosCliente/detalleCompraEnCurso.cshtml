@model slnLibreria.ViewModels.PedidosView
@using GridMvc.Html
@{
    ViewBag.Title = "Pedidos en Curso";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Pedidos en Curso</h2>
<div class="mt-2">
    @using (Html.BeginForm("salirCliente", "PedidosCliente"))
    {
        <input type="submit" value="Salir" class="ml-2 btn btn-outline-dark float-right" />
    }
    @Html.ActionLink("Regresar", "Index", null, new { @class = "btn btn-outline-dark float-right" })
</div>
<div class="m-1 col-10">

    @if (!string.IsNullOrEmpty(@ViewBag.ErrorFinalizar))
    {
        <div class="alert alert-danger" role="alert" id="success-alert">
            @MvcHtmlString.Create(ViewBag.ErrorFinalizar.Replace("\n", "</br>"))
        </div>
    }

    @if (!string.IsNullOrEmpty(@ViewBag.SuccesFinalizar))
    {
        <div class="alert alert-success" role="alert" id="danger-alert">
            @MvcHtmlString.Create(ViewBag.SuccesFinalizar.Replace("\n", "</br>"))
        </div>
    }

</div>
<h4>Libros</h4>
<hr />
<div>
    <div class="code-cut table-sm small">
        @Html.Grid(Model.DetallePedidos).SetLanguage("es").Columns(Columns =>{
       Columns.Add(c => c.libroNombre).Titled("Nombre Libro").Filterable(true);
       Columns.Add(c => c.libroAutor).Titled("Autor Libro").Filterable(true);
       Columns.Add(c => c.materiaNombre).Titled("Materia Libro").Filterable(true);
       Columns.Add(c => c.salaNombre).Titled("Sala").Filterable(true);
       Columns.Add(c => c.libreriaNombre).Titled("Libreria").Filterable(true);
       Columns.Add(c => c.cantidadPedido).Titled("Cantidad").Filterable(true);
       Columns.Add(c => c.totalPedido).Titled("Total a Pagar").Filterable(true);
       Columns.Add()
       .Encoded(false)
       .Sanitized(false)
       .SetWidth(30)
       .RenderValueAs(n => Html.ActionLink("Confirmar Pedido", "confirmarPedido", new { id = n.pedidoID }, new { @class = "btn btn-sm btn-outline-info m-1" }));
       Columns.Add()
       .Encoded(false)
       .Sanitized(false)
       .SetWidth(30)
       .RenderValueAs(n => Html.ActionLink("Eliminar Pedido", "eliminarPedido", new { id = n.pedidoID }, new { @class = "btn btn-sm btn-outline-info m-1" }));
   }).WithPaging(15).Sortable(true)
    </div>
    <div class="input-group mb-3" id="datosEnCurso">
        <div class="input-group-prepend">
            <span class="input-group-text" id="basic-addon3">N° de Libros</span>
        </div>
        <span type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3">@Model.cantidadEnCurso</span>
        <div class="input-group-append">
            <span class="input-group-text" id="basic-addon3">Total</span>
        </div>
        <span type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3">@Model.totalEnCurso</span>
    </div>
</div>

